#!/bin/sh
module=aesdchar
device=aesdchar

# Navigate to the script's directory
cd `dirname $0`

# Invoke rmmod to remove the module from the kernel.
# If aesdsocket is still running and has /dev/aesdchar open, this will fail.
rmmod $module || exit 1

# Remove the device node from the filesystem to prevent stale entries.
rm -f /dev/${device}

echo "Successfully unloaded $module and removed /dev/${device}"
